# 游戏大厅使用指南

## 概述

游戏大厅是经典街机游戏平台的核心功能之一，允许玩家选择房间和座位进行多人对战。

## 功能特点

### 1. 房间列表（左侧）
- 显示3个房间：room_1, room_2, room_3
- 每个房间显示当前玩家数量和最大容量
- 房间状态：未满员/满员
- 点击房间可以切换查看不同房间的桌子

### 2. 对战桌面（右侧）
- 每个房间包含50张桌子
- 每张桌子最多支持4名玩家
- 桌子布局：正方形，四个座位编号为1、2、3、4
- 座位状态：
  - 空座位：蓝色边框，可点击加入
  - 已占用：绿色填充，不可点击
  - 游戏中：橙色背景，不可加入

## 使用方法

### 1. 进入游戏大厅
```
方法1：从对战中心进入
- 访问 /battle
- 点击任意对战模式
- 自动进入俄罗斯方块游戏大厅

方法2：直接访问
- 访问 /battle/hall/{gameId}
- gameId: 1=俄罗斯方块, 2=贪吃蛇, 3=打砖块, 4=拳皇97, 5=街头霸王2

方法3：测试页面
- 访问 /test/hall
- 选择要测试的游戏
```

### 2. 选择房间
- 在左侧房间列表中点击任意房间
- 右侧会显示对应房间的所有桌子
- 房间信息包括玩家数量和状态

### 3. 加入游戏
- 在右侧桌子区域找到空座位
- 点击座位号（1、2、3、4）
- 系统会自动将您分配到该座位
- 等待其他玩家加入或游戏开始

## 界面说明

### 桌子图标设计
```
    [1]
[4] [□] [2]
    [3]
```

- 正方形代表桌子
- 数字1-4代表座位号
- 座位位置：上(1)、右(2)、下(3)、左(4)

### 状态指示
- **空座位**：蓝色边框，可点击
- **已占用**：绿色填充，显示玩家信息
- **游戏中**：橙色背景，显示游戏图标
- **满员**：灰色，不可操作

## 技术实现

### 前端组件
- `GameHallPage.js` - 主游戏大厅页面
- 响应式设计，支持桌面和移动设备
- 实时更新座位状态

### 后端支持
- 数据库表：`battle_rooms`, `battle_tables`, `user_status`
- WebSocket实时通信
- 座位管理和状态同步

### 路由配置
```javascript
// 游戏大厅路由
<Route path="/battle/hall/:gameId" element={<BattleGameHallPage />} />

// 房间路由
<Route path="/battle/room/:gameId/:roomId" element={<BattleRoomPage />} />
```

## 数据库结构

### battle_rooms 表
- 每个游戏3个房间
- 每个房间最大500人
- 每个房间50张桌子

### battle_tables 表
- 每张桌子4个座位
- 座位状态管理
- 游戏开始/结束时间

### user_status 表
- 用户当前位置跟踪
- 活动状态管理
- 最后活动时间

## 测试方法

### 1. 启动应用
```bash
# 后端
cd backend
npm run dev

# 前端
cd frontend
npm start
```

### 2. 访问测试页面
```
http://localhost:3000/test/hall
```

### 3. 测试功能
- 点击不同游戏进入对应大厅
- 测试房间切换
- 测试座位点击
- 测试多人同时在线

## 注意事项

1. **登录要求**：需要先登录才能使用游戏大厅
2. **实时性**：座位状态实时更新，需要WebSocket连接
3. **并发控制**：同一座位只能被一个玩家占用
4. **状态同步**：离开页面时自动清理用户状态

## 扩展功能

### 计划中的功能
- 房间聊天功能
- 玩家准备状态
- 游戏设置选项
- 观战模式
- 排行榜显示

### 自定义选项
- 房间密码保护
- 自定义游戏规则
- 好友邀请系统
- 房间创建功能

## 故障排除

### 常见问题
1. **无法连接**：检查WebSocket服务是否启动
2. **座位不更新**：刷新页面或重新连接
3. **无法加入**：检查是否已登录
4. **页面空白**：检查路由配置是否正确

### 调试方法
- 打开浏览器开发者工具
- 查看Console日志
- 检查Network标签页的WebSocket连接
- 验证API请求是否正常

## 联系支持

如果遇到问题，请：
1. 检查控制台错误信息
2. 确认网络连接正常
3. 验证数据库服务运行状态
4. 联系技术支持团队 